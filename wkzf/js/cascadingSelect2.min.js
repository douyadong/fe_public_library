+function(){function e(a,l,t,n,s){if(0!==l){if(a&&a.length>0)for(var i=0;i<a.length;i++)a[i]&&a[i][s.itemsMapping]&&e(a[i][s.itemsMapping],l-1,t,n,s)}else if(a)for(var i=0;i<a.length;i++)a[i].id==t&&n.push(a[i])}$.cascadingSelect2=function(a){a.itemsMapping=a.itemsMapping||"items",a.data?$.each(a.selects,function(l,t){$(t.ele).select2({data:0===l&&a.data||null,language:"zh-CN",placeholder:"--请选择--"}).on("change",function(){var n=$(t.ele).val(),s=[];e(a.data,l,n,s,a),s.length>0&&(s=s[0][a.itemsMapping]);var i=a.selects[l+1];if(i){$(i.ele).select2("val",""),$(i.ele).find("option").remove(),$(i.ele).select2({data:s,language:"zh-CN",placeholder:"--请选择--"});for(var u=l+2;u<a.selects.length;u++)$(a.selects[u].ele).select2("val",""),$(a.selects[u].ele).find("option").remove()}})}):$.each(a.selects,function(e,l){var t=$(l.ele).data("value");void 0!==t&&(l.initial=t);var n={};a.dynamic?(n={minimumInputLength:l.minimumInput||1,ajax:{url:function(){var t=l.url,n=a.selects[e-1];return e>0&&(void 0===n.value||null===n.value||""===n.value?t=l.url:t+="?"+a.selects[e-1].paramNameForNext+"="+a.selects[e-1].value),t},dataType:l.dataType||"json",delay:l.delay||250,data:l.data&&"function"==typeof l.data||function(e){var a=$.extend({},l.data);return a[l.paramName]=e.term,a},processResults:l.processResults||function(e,l){return l.page=l.page||1,{results:e[a.itemsMapping],pagination:{more:!1}}},transport:function(a,t,n){if(e>0&&l.url===a.url)return null;var s=$.ajax(a);return s.then(t),s.fail(n),s}},language:"zh-CN",placeholder:"--请选择--"},$(l.ele).select2(n)):0==e?$.ajax({url:l.url,data:l.data,success:function(e){e=l.processResults&&l.processResults(e)||e;var a=$(l.ele);$.each(e,function(e,t){a.append("<option value='"+t.id+"' "+(l.initial==t.id?"selected":"")+">"+t.text+"</option>")}),$(l.ele).select2({language:"zh-CN"}),delete l.initial,l.ready&&l.ready()}}):$(l.ele).select2({language:"zh-CN"}),$(l.ele).on("change",function(){var t=$(l.ele).val(),n=l.placeholder&&l.placeholder.id;l.value=t;for(var s=e+1;s<a.selects.length;s++)a.selects[s].value=null,$(a.selects[s].ele).find("option").remove(),$(a.selects[s].ele).select2({language:"zh-CN",placeholder:l.placeholder});if(!a.dynamic){var i=a.selects[e+1];if(i&&t!=n){var u=i.url;void 0===l.value||null===l.value||""===l.value?u=i.url:u+="?"+l.paramNameForNext+"="+l.value,$.ajax({url:u,success:function(e){e=i.processResults&&i.processResults(e)||e;var a=$(i.ele);$.each(e,function(e,l){a.append("<option value='"+l.id+"' "+(i.initial==l.id?"selected":"")+">"+l.text+"</option>")}),a.select2({language:"zh-CN"}),delete i.initial,i.ready&&i.ready()}})}}null!=l.value&&""!=l.value&&"-1"!=l.value&&l.selected&&l.selected()})})}}(jQuery);