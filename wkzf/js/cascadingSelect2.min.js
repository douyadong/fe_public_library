+function(){function e(l,a,t,n){if(0!==a){if(l&&l.length>0)for(var s=0;s<l.length;s++)l[s]&&l[s].items&&e(l[s].items,a-1,t,n)}else if(l)for(var s=0;s<l.length;s++)l[s].id==t&&n.push(l[s])}$.cascadingSelect2=function(l){l.data?$.each(l.selects,function(a,t){$(t.ele).select2({data:0===a&&l.data||null,language:"zh-CN",placeholder:"--请选择--"}).on("change",function(){var n=$(t.ele).val(),s=[];e(l.data,a,n,s),s.length>0&&(s=s[0].items);var u=l.selects[a+1];if(u){$(u.ele).select2("val",""),$(u.ele).find("option").remove(),$(u.ele).select2({data:s,language:"zh-CN",placeholder:"--请选择--"});for(var c=a+2;c<l.selects.length;c++)$(l.selects[c].ele).select2("val",""),$(l.selects[c].ele).find("option").remove()}})}):$.each(l.selects,function(e,a){var t=$(a.ele).data("value");void 0!==t&&(a.initial=t);var n={};l.dynamic?(n={minimumInputLength:a.minimumInput||1,ajax:{url:function(){var t=a.url,n=l.selects[e-1];return e>0&&(void 0===n.value||null===n.value||""===n.value?t=a.url:t+="?"+l.selects[e-1].paramNameForNext+"="+l.selects[e-1].value),t},dataType:a.dataType||"json",delay:a.delay||250,data:a.data&&"function"==typeof a.data||function(e){var l=$.extend({},a.data);return l[a.paramName]=e.term,l},processResults:a.processResults||function(e,l){return l.page=l.page||1,{results:e.items,pagination:{more:!1}}},transport:function(l,t,n){if(e>0&&a.url===l.url)return null;var s=$.ajax(l);return s.then(t),s.fail(n),s}},language:"zh-CN",placeholder:"--请选择--"},$(a.ele).select2(n)):0==e?$.ajax({url:a.url,data:a.data,success:function(e){e=a.processResults&&a.processResults(e)||e;var l=$(a.ele);$.each(e,function(e,t){l.append("<option value='"+t.id+"' "+(a.initial==t.id?"selected":"")+">"+t.text+"</option>")}),$(a.ele).select2({language:"zh-CN"}),delete a.initial,a.ready&&a.ready()}}):$(a.ele).select2({language:"zh-CN"}),$(a.ele).on("change",function(){var t=$(a.ele).val(),n=a.placeholder&&a.placeholder.id;a.value=t;for(var s=e+1;s<l.selects.length;s++)l.selects[s].value=null,$(l.selects[s].ele).find("option").remove(),$(l.selects[s].ele).select2({language:"zh-CN",placeholder:a.placeholder});if(!l.dynamic){var u=l.selects[e+1];if(u&&t!=n){var c=u.url;void 0===a.value||null===a.value||""===a.value?c=u.url:c+="?"+a.paramNameForNext+"="+a.value,$.ajax({url:c,success:function(e){e=u.processResults&&u.processResults(e)||e;var l=$(u.ele);$.each(e,function(e,a){l.append("<option value='"+a.id+"' "+(u.initial==a.id?"selected":"")+">"+a.text+"</option>")}),l.select2({language:"zh-CN"}),delete u.initial,u.ready&&u.ready()}})}}null!=a.value&&""!=a.value&&"-1"!=a.value&&a.selected&&a.selected()})})}}(jQuery);