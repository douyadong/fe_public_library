+function(){function e(l,a,t,n,i){if(0!==a){if(l&&l.length>0)for(var c=0;c<l.length;c++)l[c]&&l[c][i.itemsMapping]&&e(l[c][i.itemsMapping],a-1,t,n,i)}else if(l)for(var c=0;c<l.length;c++)l[c][i.itemMapping.id]==t&&n.push(l[c])}var l={itemsMapping:"items",itemMapping:{id:"id",text:"text"},minimumInput:1,dynamic:!1,placeholder:{id:"",text:"--请选择--"}};$.cascadingSelect2=function(a){a=Object.assign({},l,a),console.log(a),a.data?$.each(a.selects,function(l,t){$(t.ele).select2({data:0===l&&a.data||null,language:"zh-CN",placeholder:t.placeholder&&t.placeholder.text||a.placeholder.text}).on("change",function(){var n=$(t.ele).val(),i=[];e(a.data,l,n,i,a),i.length>0&&(i=i[0][a.itemsMapping]);var c=a.selects[l+1];if(c){$(c.ele).select2("val",""),$(c.ele).find("option").remove(),$(c.ele).select2({data:i,language:"zh-CN",placeholder:c.placeholer&&c.placeholder.text||a.placeholder.text});for(var r=l+2;r<a.selects.length;r++)$(a.selects[r].ele).select2("val",""),$(a.selects[r].ele).find("option").remove()}})}):$.each(a.selects,function(e,l){var t=$(l.ele).data("value");void 0!==t&&(l.initial=t);var n={};a.dynamic?(n={minimumInputLength:l.minimumInput||a.minimumInput,ajax:{url:function(){var t=l.url,n=a.selects[e-1];return e>0&&(void 0===n.value||null===n.value||""===n.value?t=l.url:t+="?"+a.selects[e-1].paramNameForNext+"="+a.selects[e-1].value),t},dataType:l.dataType||"json",delay:l.delay||250,data:l.data&&"function"==typeof l.data&&l.data||function(e){var a=$.extend({},l.data);return a[l.paramName]=e.term,a},processResults:l.processResults||function(e,l){return l.page=l.page||1,{results:e[a.itemsMapping],pagination:{more:!1}}},transport:function(a,t,n){if(e>0&&l.url===a.url)return null;var i=$.ajax(a);return i.then(t),i.fail(n),i}},language:"zh-CN",placeholder:l.placeholder&&l.placeholder.text||a.placeholder.text},$(l.ele).select2(n)):0==e?$.ajax({url:l.url,data:l.data,success:function(e){e=l.processResults&&l.processResults(e)||e;var t=$(l.ele);console.log(l.initial),$.each(e,function(e,n){var i=n[a.itemMapping.id];t.append("<option value='"+i+"' "+(l.initial==i?"selected":"")+">"+n[a.itemMapping.text]+"</option>")}),$(l.ele).select2({language:"zh-CN"}),delete l.initial,l.ready&&l.ready()}}):$(l.ele).select2({language:"zh-CN",placeholder:l.placeholder&&l.placeholder.text||a.placeholder.text}),$(l.ele).on("change",function(){var t=$(l.ele).val(),n=l.placeholder&&l.placeholder.id;l.value=t;for(var i=e+1;i<a.selects.length;i++)a.selects[i].value=null,$(a.selects[i].ele).find("option").remove(),$(a.selects[i].ele).select2({language:"zh-CN",placeholder:l.placeholder});if(!a.dynamic){var c=a.selects[e+1];if(c&&t!=n){var r=c.url;void 0===l.value||null===l.value||""===l.value?r=c.url:r+="?"+l.paramNameForNext+"="+l.value,$.ajax({url:r,success:function(e){e=c.processResults&&c.processResults(e)||e;var l=$(c.ele);$.each(e,function(e,t){var n=t[a.itemMapping.id];l.append("<option value='"+n+"' "+(c.initial==n?"selected":"")+">"+t[a.itemMapping.text]+"</option>")}),l.select2({language:"zh-CN"}),delete c.initial,c.ready&&c.ready()}})}}null!=l.value&&""!=l.value&&"-1"!=l.value&&l.selected&&l.selected()})})}}(jQuery);